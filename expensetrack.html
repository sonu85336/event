<!DOCTYPE html>
<html>
    <head>
        <title>

        </title>
    </head>
    <body>
<form id = 'form' onsubmit="savetolocal(event)">
    <label for="Amount">Choose ExpenseAmount</label>
    <input  type="number"  name="nameid" id = 'number' class="uniqe">
    <label for="discription" >Choose Discription</label>
    <input type="text" name="textid" id="text" class="uniqe">
    <label for="category">Choose a Category</label>
    <select name="optionid" id="option">

 <option value="Movie">Movie</option>
 <option value="cars">Cars</option>
 <option value="fuel">Fuel</option>

 <option value="taravlling">Travlling</option>
 <option value="party">Party</option>
</select>
<button type="submit" vlaue="Add Expense">Add Expense</button>
<ul id="ul">
    <li id="li1" class="li">Sonu kushwaha</li>
</ul>

    
   


</form>


    </body>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.2.0/axios.min.js"></script>
    <script >



function savetolocal(event){
    event.preventDefault()
    const name = event.target.nameid.value;
    const text= event.target.textid.value
    const option = event.target.optionid.value
    var myobj = {
        name,
        text,
        option,
    }
  axios.post('https://crudcrud.com/api/98bd189eddba4e6d8acfc5c4132818ab/appointment',myobj)
  .then(respone=>{
    shownewuseronscreen(myobj)
    console.log(respone)
  })
  .catch(err=>{
    console.log(err)
  })



//})
    // let joson = JSON.stringify(myobj)
    // localStorage.setItem(myobj.name,joson)
    // shownewuseronscreen(myobj)
  
}

window.addEventListener("DOMContentLoaded",()=>{
    event.preventDefault()
    

  axios.get("https://crudcrud.com/api/98bd189eddba4e6d8acfc5c4132818ab/appointment")  
  .then(response=>{
    console.log(response)
    for(var i=0;i<response.length;i++){
        shownewuseronscreen(response[i]) 
    }
  })
  .catch(err=>{ 
    console.log(err)
  })
})


  
function  shownewuseronscreen(screen){
    document.getElementById('number').value = name;
    document.getElementById('text').value = text;
    document.getElementById('option').vlaue=option;
    
    
    const prentNode = document.getElementById('ul')
    const childnode = `<li id='${screen._id}'> ${screen.name} ${screen.text} ${screen.option}
     <button onclick = deleteuser('${screen._id}')> Delete</button> 
   
     <button onclick = editUser('${screen._id},${screen.name}','${screen.text}','${screen.option}')>Edit</button>
  </li>`
    prentNode.innerHTML = prentNode.innerHTML+childnode;
}
//edit user 
function editUser(nameid,textid,optionid){
    document.getElementById('number').value=nameid;
    document.getElementById('text').value= textid;
    document.getElementById('option').vlaue = optionid;
    deleteuser( screenId)
}

//delete user 
 function deleteuser(screenId){
    
    axios.delete(`https://crudcrud.com/api/98bd189eddba4e6d8acfc5c4132818ab/appointment/${screenId}`)
    
    .then(response=>{
      removeuserscreen(screenId)
        console.log(response)
    }) 
    // .catch(err=>{
    //     console.log(err)
    // })
   // localStorage.removeItem(nameid);

     removeuserscreen(screenId)
   
 }
 function   removeuserscreen(screenId){
const prentNode = document.getElementById('ul')
const childnode = document.getElementById(screenId)
prentNode.removeChild(childnode)

// if(childnode){
//     prentNode.removeChild(childnode)
// }
 }


        </script>
</html>